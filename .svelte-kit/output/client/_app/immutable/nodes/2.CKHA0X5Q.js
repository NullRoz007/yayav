import{d as F,a as e,t as p,s as L,b,c as X}from"../chunks/Bv2CX0pF.js";import{i as K}from"../chunks/0Eqm2C4h.js";import{y as U,C as W,L as E,D as c,E as o,K as f,I as d,B as T,T as Q}from"../chunks/BZzQXbv5.js";import{i as R,r as Y,y as V,g as C,j as D,k as Z,b as tt}from"../chunks/BvU8keI9.js";import{g as at}from"../chunks/DHHkUmq2.js";import{A as q,a as B}from"../chunks/CdaYFjyl.js";async function J(l={}){return typeof l=="object"&&Object.freeze(l),await R("plugin:dialog|open",{options:l})}var G=Y(()=>V),et=p('<button type="button" class="btn btn-sm variant-filled-primary" style="transform: translateX(-70%);">clear</button>');function H(l,n){U(n,!1);const s=()=>{G(G().log_messages=[])};K();var y=et();y.__click=s,e(l,y),W()}F(["click"]);const rt=async(l,n)=>{const s=await J({multiple:!0,directory:!1});s.length!=0&&n(s,!1)},st=async(l,n)=>{const s=await J({multiple:!0,directory:!0});s.length!=0&&n(s,!0)};var ot=p('<li class="text-sm whitespace-normal break-words overflow-hidden"> </li>'),lt=p('<div class="card m-4 max-w-128"><header class="card-header"><div class="flex justify-between"><span> </span> <button type="button" class="btn btn-sm variant-filled-error ">x</button></div></header> <section class="p-4"><span>Paths:</span> <ol class="list max-w-full break-words"></ol></section> <footer class="card-footer"><span class="chip variant-filled-warning">Unscanned</span></footer></div>'),nt=(l,n)=>{n([],!1,!0)},it=p('<div class="flex flex-wrap justify-center"></div> <div class="flex justify-end"><div class="btn-group variant-filled-primary"><button>Add file</button> <button>Add directory</button> <button>Add memory</button></div></div>',1);function ct(l,n){U(n,!1);const s=(t,r,a)=>{const m={paths:t,is_dirs:r,is_memory:a};V.targets.push(m)},y=t=>{V.targets.splice(t,1)};K();var I=it(),u=E(I);C(u,5,()=>V.targets,D,(t,r,a)=>{var m=lt(),v=c(m),_=c(v),$=c(_),M=c($);o($);var g=f($,2);g.__click=()=>{y(a)},o(_),o(v);var A=f(v,2),i=f(c(A),2);C(i,5,()=>d(r).paths,D,(S,z)=>{var x=ot(),h=c(x,!0);o(x),T(()=>L(h,d(z))),e(S,x)}),o(i),o(A),Q(2),o(m),T(()=>L(M,`Type: ${(d(r).is_dirs?"Directories":d(r).is_memory?"Memory":"Files")??""}`)),e(t,m)}),o(u);var w=f(u,2),P=c(w),k=c(P);k.__click=[rt,s];var j=f(k,2);j.__click=[st,s];var O=f(j,2);O.__click=[nt,s],o(P),o(w),e(l,I),W()}F(["click"]);var dt=p('<p class="overflow-hide"> </p>'),vt=(l,n,s)=>{n(d(s))},_t=p('<button class="btn btn-sm variant-filled-secondary m-1"> </button>'),pt=p("<pre> </pre>"),ut=p('<section class="bg-gray-900 max-h-64 overflow-auto p-4 mb-2"></section>'),mt=p("<!> <br> <!> <br> <!>",1);function ht(l,n){U(n,!1);const s={Info:"text-blue-500",Warning:"text-yellow-500",Error:"text-red-500 font-bold",Success:"text-green-500",Match:"text-red-500 font-bold"},y=at(),I=u=>{const w={id:"rule-drawer",meta:u};console.log(u),y.open(w)};K(),q(l,{children:(u,w)=>{var P=mt(),k=E(P);B(k,{class:"variant-ghost-surface mt-5 mr-5 ml-5",$$slots:{lead:(t,r)=>{var a=b("Targets");e(t,a)},summary:(t,r)=>{var a=b();a.nodeValue="",e(t,a)},content:(t,r)=>{ct(t,{})}}});var j=f(k,4);B(j,{class:"variant-ghost-surface m-5",$$slots:{lead:(t,r)=>{var a=b("Matches");e(t,a)},summary:(t,r)=>{var a=b();a.nodeValue="",e(t,a)},content:(t,r)=>{q(t,{children:(a,m)=>{var v=X(),_=E(v);C(_,1,Z,D,($,M)=>{B($,{class:"variant-ghost-surface ",$$slots:{lead:(g,A)=>{var i=dt(),S=c(i,!0);o(i),T(()=>L(S,d(M).path)),e(g,i)},summary:(g,A)=>{var i=b();i.nodeValue="",e(g,i)},content:(g,A)=>{var i=X(),S=E(i);C(S,1,()=>d(M).rules,D,(z,x)=>{var h=_t();h.__click=[vt,I,x];var N=c(h,!0);o(h),T(()=>L(N,d(x).identifier)),e(z,h)}),e(g,i)}}})}),e(a,v)},$$slots:{default:!0}})}}});var O=f(j,4);B(O,{class:"variant-ghost-surface m-5",$$slots:{lead:(t,r)=>{var a=b("Logs");e(t,a)},summary:(t,r)=>{var a=b();a.nodeValue="",e(t,a)},content:(t,r)=>{var a=ut();C(a,5,()=>V.log_messages,D,(m,v)=>{var _=pt(),$=c(_,!0);o(_),T(()=>{tt(_,`text-sm ${s[d(v).lvl]||"text-white"}`),L($,d(v).msg)}),e(m,_)}),o(a),e(t,a)},iconClosed:(t,r)=>{H(t,{})},iconOpen:(t,r)=>{H(t,{})}}}),e(u,P)},$$slots:{default:!0}}),W()}F(["click"]);export{ht as component};
