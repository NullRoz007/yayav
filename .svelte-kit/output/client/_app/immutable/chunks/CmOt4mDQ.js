import{C as h,i as a,b as p}from"./pf7KOJrY.js";function L(i,t,s,e){var r=i.__styles??(i.__styles={});r[t]!==s&&(r[t]=s,s==null?i.style.removeProperty(t):i.style.setProperty(t,s,""))}class c{constructor(){this.eventListeners=Object.create(null)}addListener(t,s){return this.on(t,s)}removeListener(t,s){return this.off(t,s)}on(t,s){return t in this.eventListeners?this.eventListeners[t].push(s):this.eventListeners[t]=[s],this}once(t,s){const e=r=>{this.removeListener(t,e),s(r)};return this.addListener(t,e)}off(t,s){return t in this.eventListeners&&(this.eventListeners[t]=this.eventListeners[t].filter(e=>e!==s)),this}removeAllListeners(t){return t?delete this.eventListeners[t]:this.eventListeners=Object.create(null),this}emit(t,s){if(t in this.eventListeners){const e=this.eventListeners[t];for(const r of e)r(s);return!0}return!1}listenerCount(t){return t in this.eventListeners?this.eventListeners[t].length:0}prependListener(t,s){return t in this.eventListeners?this.eventListeners[t].unshift(s):this.eventListeners[t]=[s],this}prependOnceListener(t,s){const e=r=>{this.removeListener(t,e),s(r)};return this.prependListener(t,e)}}class u{constructor(t){this.pid=t}async write(t){await a("plugin:shell|stdin_write",{pid:this.pid,buffer:t})}async kill(){await a("plugin:shell|kill",{cmd:"killChild",pid:this.pid})}}class o extends c{constructor(t,s=[],e){super(),this.stdout=new c,this.stderr=new c,this.program=t,this.args=typeof s=="string"?[s]:s,this.options=e??{}}static create(t,s=[],e){return new o(t,s,e)}static sidecar(t,s=[],e){const r=new o(t,s,e);return r.options.sidecar=!0,r}async spawn(){const t=this.program,s=this.args,e=this.options;typeof s=="object"&&Object.freeze(s);const r=new h;return r.onmessage=n=>{switch(n.event){case"Error":this.emit("error",n.payload);break;case"Terminated":this.emit("close",n.payload);break;case"Stdout":this.stdout.emit("data",n.payload);break;case"Stderr":this.stderr.emit("data",n.payload);break}},await a("plugin:shell|spawn",{program:t,args:s,options:e,onEvent:r}).then(n=>new u(n))}async execute(){const t=this.program,s=this.args,e=this.options;return typeof s=="object"&&Object.freeze(s),await a("plugin:shell|execute",{program:t,args:s,options:e})}}const d=3e3,f="http://localhost",w=async()=>{await o.sidecar("binaries/yaymodel").execute(),console.log("Model Sidecar is now ready!"),p(!0)},l=async(i,t,s)=>{let e={method:t};return t==="POST"&&(e.body=JSON.stringify(s),e.headers={"Content-Type":"application/json"}),await(await fetch(f+":"+d+"/"+i,e)).json()},g=async()=>await l("model/status","GET",{}),m=async()=>{await l("model/train","POST",{datasetPath:"/home/bens/Documents/Programming/yayAV/yayAV/sidecar-model/datasets/dataset_1.csv",epochs:2})};export{m as a,w as b,g,L as s};
